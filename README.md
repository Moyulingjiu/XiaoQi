# 小柒

## 基本介绍

小柒是一个基于[mirai框架](https://github.com/mamoe/mirai)实现的QQ机器人，最终目标想实现一个养成类的机器人。目前已经支持了许多的功能。

如果对本项目有想法想要部署自己的小柒或者希望免费使用由作者自己维护的小柒可以加入QQ群：479504567

也可以直接联系QQ：3284586127

## 功能说明

开发者的使用说明详见：[二次开发说明](https://github.com/Moyulingjiu/QQbot/blob/master/using.md)

小柒的操作权限分为四类：主人、管理员、贡献者、用户

贡献者名单里的人可以执行用户的所有操作，管理员名单里的人可以执行贡献者计划的所有操作，主人也可以执行管理员的所有操作。也就是说小柒的鉴权系统权限是向下兼容的，设计的理念是十分信任高权限的人。

所以权限大小为主人>管理员>贡献者>用户

帮助内的命令在输入的时候请不要带序号，英文命令都需要加上星号（\*）以便于识别。根据提示输入命令。之所以英文命令要加上 \*，是为了避免和其他机器人产生冲突。类似于help之类的指令，肯定有很多机器人具有该指令，如果\*help，就可以避免其他机器人回复的情况。

### 主人

主人拥有小柒的最高权限，只能有一人。并且在初始化的时候设置，不能更改。如何让小柒初始化，见常见问题Q&A。主人的命令，可以向小柒发送“主人帮助”来获取。

请注意，小柒的设计是完全信任主人明白小柒的工作逻辑的。主人可以修改版本信息等很基本的东西。

### 管理员

权限包括但不限于：添加文摘、情话，开启打卡计划，获取小柒是否还在运行，获取当前小柒的版本信息

管理员可以操作小柒的文库，授权贡献者等。通过输入“管理员帮助”来获取所有有关于管理员命令的说明

### 贡献者

一个用来帮助小柒成长和管理的计划。

权限包括但不限于：添加特定群的关键词回复，特定群的打卡计划管理等。

贡献者计划的所有命令可以通过输入“贡献者帮助”来获取所有的命令说明

### 用户

一般用户，可以完成打卡、查询天气、运势等操作。

输入“*help”来获取用户可以执行的操作

### 自主回复

当出现部分关键词触发与NLP神经网络学习到的可回复的词触发。小柒将会自我回复部分句子，不包含在上述指令操作内。

## 版本信息

详见：[更新日志](https://github.com/Moyulingjiu/QQbot/blob/master/version.md)



## 常见问题Q&A

* Q：小柒版本有大更新，涉及到数据文件的变更如何更新我的小柒并保证数据不丢失？
* A：可以使用版本大更新时，同步更新的更新程序。也可以手动根据源代码来写批处理文件。或者手动添加原来的信息。以上三个方法均可以使用
*  
* Q：如何让小柒初始化？
* A：删掉data目录下的"baseInformation.pkl"。按照小柒的提示输入主人的QQ号，就可以修改主人
*  
* Q：为什么小柒的部署这么麻烦？没有自动化的一键部署？
* A：因为源代码本身是面对程序员设计的。相信部署小柒的过程中，你也可以学会很多东西。而且如果只是想使用小柒，有作者自己维护的小柒，只需要加入QQ群即可联系上作者维护的小柒。~~其实是作者懒得写一键部署的代码~~。
*  
* Q：为什么数据都没有加密？
* A：因为信任用户的电脑/服务器安全，而且我实在是想不到小柒的数据有什么好偷的。偷一堆文摘和情话？还是打卡记录？
*  
* Q：如何知道下放权限的贡献者和管理员执行了什么操作？（审计功能）
* A：在data目录下有个文件"bot.log"。该文件就是小柒的审计文件，可以知道他们干了什么。因为日志文件会越来越大，请注意定期清理。
*  
* Q：为什么提示远程连接被拒绝？
* A：该问题有很多原因。第一点，mirai的console是否有在运行，如果没有运行请按照[二次开发说明](https://github.com/Moyulingjiu/QQbot/blob/master/using.md)部署console。第二点，bot.py里的app变量是否有修改？要把app里的qq号改成自己的qq，密钥改成自己console的密钥（在console安装位置的config/net.mamoe.mirai-api-http/setting.yml里的authKey就是密钥）。第三点，检查自己的网卡，是否存在硬件问题。
*  
* Q：为什么我的小柒越来越臃肿，占用空间越来越大？
* A：没有删除data目录下的“bot.log”文件。该文件是日志文件，记录有没有对小柒平稳运行产生危害的操作。
*  
* Q：为什么我的console没有“config/net.mamoe.mirai-api-http/setting.yml”文件？
* A：因为你没有运行console，在第一次运行时，console会自动生成该文件。
*  
* Q：为什么小柒提示文件缺失？
* A：丢了data目录下的tarot和tarot2两个文件，这两个文件是塔罗牌的抽卡文件，不可缺失，请从github重新下载这两个文件。除开这两个文件，其他文件都是可以丢失的。

